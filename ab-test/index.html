<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Design an A/B Test - Luiz Schiller</title><meta property=og:title content="Design an A/B Test"><meta name=description content="Designed an A/B test, including which metrics to measure and how long the test should be run. I also analyzed the results of an A/B test that was run by Udacity, recommended a decision, and proposed a follow-up experiment."><meta property=og:description content="Designed an A/B test, including which metrics to measure and how long the test should be run. I also analyzed the results of an A/B test that was run by Udacity, recommended a decision, and proposed a follow-up experiment."><link rel=canonical href=http://luizschiller.com/ab-test/ ><meta property=og:url content=http://luizschiller.com/ab-test/ ><meta property=og:site_name content="Luiz Schiller"><meta property=og:type content=article><meta property=article:published_time content=2017-04-17T00:00:00+01:00><script type=application/ld+json>{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Design an A/B Test",
"datePublished": "2017-04-17T00:00:00+01:00",
"description": "Designed an A/B test, including which metrics to measure and how long the test should be run. I also analyzed the results of an A/B test that was run by Udacity, recommended a decision, and proposed a follow-up experiment.",
"url": "http://luizschiller.com/ab-test/"}</script><link rel=stylesheet href=/assets/stylesheets/style-764afa6a2a.min.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/assets/favicon.ico><link type=application/atom+xml rel=alternate href=http://luizschiller.com/feed.xml title="Luiz Schiller"></head><body><header class=site-header><div class=wrapper><a class=site-title href=/ >Luiz Schiller</a><nav class=site-nav><a href=# class=menu-icon><svg viewBox="0 0 18 15"><path fill=#424242 d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/><path fill=#424242 d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/><path fill=#424242 d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/></svg></a><div class=trigger><a class=page-link href=/about/ >About</a></div></nav></div></header><div class=page-content><div class=wrapper><article class=post itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Design an A/B Test</h1><p class=post-meta><time datetime=2017-04-17T00:00:00+01:00 itemprop=datePublished>Apr 17, 2017</time></p></header><div class=post-content itemprop=articleBody><h2>Experiment Design</h2><p>This project was made as part of Udacity&rsquo;s Data Analyst Nanodegree.</p><p>The project instructions can be found here: <a href="https://docs.google.com/document/u/1/d/1aCquhIqsUApgsxQ8-SQBAigFDcfWVVohLEXcV6jWbdI/pub?embedded=True">https://docs.google.com/document/u/1/d/1aCquhIqsUApgsxQ8-SQBAigFDcfWVVohLEXcV6jWbdI/pub?embedded=True</a></p><h3>Metric Choice</h3><h4>Invariant Metrics:</h4><ul><li>Number of Cookies;</li><li>Number of Clicks;</li><li>Click-through Probability</li></ul><p>Visiting the course overview page or clicking on the “start free trial” button happen before the free trial screener is triggered, so they must behave equally on control and experiment groups.</p><h4>Evaluation Metrics:</h4><ul><li>Gross Conversion: enrollments / clicks should be a good evaluation metric. It measures if the proposed change is really discouraging users who inform less than 5 hours of study per week from enrolling. This metric is expected to decrease significantly in order to launch the experiment.</li><li>Net Conversion: payments / clicks should also be a good evaluation metric. It measures if the free trial screener is changing the proportion of students who remain enrolled past the 14-day boundary after starting a free trial. This metric is expected not to decrease significantly in order to launch the experiment, since the students who complete payments usually dedicate 5 or more hours per week to studying.</li></ul><h4>Unused Metrics:</h4><ul><li>Number of user-ids: the number of enrollments could potentially be used as an evaluation metric, but since we have the gross conversion, it would be redundant, and also, comparing raw numbers of user-ids assumes control and experiment groups are equally sized, which is not always true.</li><li>Retention: payments / enrollments would be a perfect metric for this experiment, except for the experiment size needed to make a powerful test. At least 17 weeks would be needed in order to complete the experiment, which is too much. This metric would be expected to show a significant increase in order to launch the experiment.</li></ul><h3>Measuring Standard Deviation</h3><ul><li>Gross Conversion: 0.0202</li><li>Net Conversion: 0.0156</li></ul><p>In both cases, the empirical and analytical variabilities are expected to be comparable, because the unit of diversion (cookies) and the unit of analysis (cookies) are the same.</p><h3>Sizing</h3><h4>Number of Samples vs. Power</h4><p>I’m not using Bonferroni correction, since the metrics are correlated, and also because I need a specific combination of results of all metrics in order to recommend a change, so it would be too conservative. Number of Pageviews: 679300.</p><h4>Duration vs. Exposure</h4><p>I would divert 100% of the traffic, which would lead to 17 days. The experiment introduces a popup on the site, which is one more step in the way of enrolling in a free trial. This change does not present physical, psychological, emotional, social or economic risks above minimal risk. If a student enrolls in the free trial, his data becomes personally identifiable, so there has to be an agreement on privacy policies towards the data, even though the collected information is not sensitive and does not involve political attitudes, financial or health data, for example. Based on the factors cited above, I chose to divert all traffic.</p><h2>Experiment Analysis</h2><h3>Sanity Checks</h3><p>Number of Cookies: CI = (0.4988, 0.5012), Observed = 0.5006, pass</p><p>Number of Clicks on “Start free trial”: CI = (0.4959, 0.5041), Observed = 0.5005, pass</p><p>Click-through-probability on “Start free trial”: CI = (-0.0013, 0.0013), Observed = 0.0001, pass</p><h3>Result Analysis</h3><h4>Effect Size Tests</h4><p>Gross Conversion: CI = (-0.0291, -0.0120), dmin = 0.0100, statistically and practically significant.</p><p>Net Conversion: CI = (-0.0116, 0.0019), dmin = 0.0075, not statistically nor practically significant.</p><h4>Sign Tests</h4><p>Gross Conversion: p-value = 0.0026, statistically significant.</p><p>Net Conversion: p-value = 0.6776, not statistically significant.</p><h4>Summary</h4><p>The Bonferroni correction is designed to reduce risks of false positives when, in a set of tests, the launch of an experiment is conditioned to any of them matching my expectations. In my case, I need all of my tests to match my expectations in order to launch the experiment, so I’m not using the Bonferroni correction. There were no discrepancies between the effect size and the sign tests.</p><h3>Recommendation</h3><p>The encountered results for the evaluation metrics were:</p><ul><li>Gross Conversion: in order to launch the experiment, this metric should present a statistical and practical decrease, which were the results found on the tests.</li><li>Net Conversion: the confidence interval found for the effect size on net conversion includes the negative practical significance threshold. It means that there is a chance, for an alpha of 0.05, that this metric presented a practically significant decrease. It would be possible to repeat the experiment with more power, but it is unlikely that this trend would change. Since I need both metrics to match my expectations and I cannot conclude that the net conversion has not decreased, my recommendation is not to launch the experiment.</li></ul><h2>Follow-Up Experiment</h2><p>One follow-up experiment that could reduce early cancellations could be the following: when a student clicked on the “start free trial” button, a message would appear informing him that the course usually requires 5 hours of dedication per week or more, and he would be requested to mark the hours he would commit to the course on his agenda or calendar in order to proceed. There is going to be a checkbox saying “I have reserved the hours I will commit to the course”, and a “next” button that would be disabled until the checkbox was checked. The next button would then proceed to the usual checkout process. This may seem similar to the attempted experiment, but it has an important difference: it does not suggest students to try the free course materials instead of engaging on the free trial. Maybe this fact could make a significant difference on the observed effects. The hypothesis is that this new change might cause some students, who would otherwise not do so, to organize themselves and reserve some hours per week to study. This would, thus, reduce the number of students who abandon the free trial without significantly reducing the number of students who eventually complete the course. The metrics would be gross and net conversions. They measure respectively the number of enrollments and the number of payments per click on the “start free trial” button. Combined, they can express if the hypothesis holds true. Also, as calculated on the attempted experiment, they are feasible in terms of experiment size. The unit of diversion would be cookie, and the invariant metrics could be the number of course pageviews, and the number of clicks on “start free trial”.</p></div></article></div></div><footer class=site-footer><div class=wrapper><h2 class=footer-heading>Luiz Schiller</h2><div class=footer-col-wrapper><div class="footer-col footer-col-1"><ul class=contact-list><li>Luiz Schiller</li><li><a href=mailto:schillerbr@gmail.com>schillerbr@gmail.com</a></li></ul></div><div class="footer-col footer-col-2"><ul class=social-media-list><li><a href=https://github.com/schiller><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill=#828282 d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg> </span><span class=username>schiller</span></a></li><li><a href=https://twitter.com/luizschiller><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill=#828282 d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg> </span><span class=username>luizschiller</span></a></li></ul></div><div class="footer-col footer-col-3"><p>Thoughts and projects on Data Science</p></div></div></div></footer><script src=/assets/javascript/index-c1159e1d3e.min.js></script></body></html>